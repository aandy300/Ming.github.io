{"version":3,"file":"js/916.fbea98e9.js","mappings":"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","sources":["webpack://week9/./src/views/Front/ProductsView.vue","webpack://week9/./src/components/PaginationView.vue","webpack://week9/./src/components/PaginationView.vue?d04d","webpack://week9/./src/views/Front/ProductsView.vue?c50b"],"sourcesContent":["<template>\n    <!-- 分類 -->\n    <nav class=\"navbar navbar-expand-lg navbar-light justify-content-center border border-start-0 border-end-0 border-top border-bottom\">\n      <div class=\"navbar-nav flex-row overflow-auto navbar-custom-scroll\">\n        <!-- 點擊後改 data === 會無效 一個 = 就好 -->\n        <!-- // 原本分類用 現在使用 query 分類 所以沒用到了 -->\n        <!-- <a class=\"nav-item nav-link text-nowrap px-2\" @click=\"category = 'all', getData()\" onclick=\"event.preventDefault()\" href=\"#\">全部商品</a>\n        <a class=\"nav-item nav-link text-nowrap px-2\" @click=\"pagination = {total_pages: 1}, category = 'type1'\" onclick=\"event.preventDefault()\" href=\"#\">文物書籍</a>\n        <a class=\"nav-item nav-link text-nowrap px-2\" @click=\"pagination = {total_pages: 1}, category = 'type2'\" onclick=\"event.preventDefault()\" href=\"#\">周邊雜誌</a>\n        <a class=\"nav-item nav-link text-nowrap px-2\" @click=\"pagination = {total_pages: 1}, category = 'type3'\" onclick=\"event.preventDefault()\" href=\"#\">其他用品<span class=\"sr-only\">(current)</span></a> -->\n        <a class=\"nav-item nav-link text-nowrap px-2\" @click=\"getData()\" onclick=\"event.preventDefault()\" href=\"#\">全部商品</a>\n        <a class=\"nav-item nav-link text-nowrap px-2\" @click=\"pagination = {total_pages: 1}, getData(1, '分類一')\" onclick=\"event.preventDefault()\" href=\"#\">文物書籍</a>\n        <a class=\"nav-item nav-link text-nowrap px-2\" @click=\"pagination = {total_pages: 1}, getData(1, '分類二')\" onclick=\"event.preventDefault()\" href=\"#\">周邊雜誌</a>\n        <a class=\"nav-item nav-link text-nowrap px-2\" @click=\"pagination = {total_pages: 1}, getData(1, '分類三')\" onclick=\"event.preventDefault()\" href=\"#\">其他用品<span class=\"sr-only\">(current)</span></a>\n      </div>\n    </nav>\n    <div class=\"container mt-md-5 mt-3 mb-7\">\n      <div class=\"row\">\n        <!-- 商品單項 -->\n        <!-- V-FOR -->\n        <!-- <div class=\"col-md-3\" v-for=\"item in products\" :key=\"item.id\" > -->\n        <!-- <div class=\"col-md-3\" v-for=\"item in filterDate(products)\" :key=\"item.id\" > -->\n        <div class=\"col-md-3\" v-for=\"item in products\" :key=\"item.id\" >\n        <!-- <div class=\"col-md-3\" v-for=\"item in filterDate(productsAll)\" :key=\"item.id\" > -->\n          <div class=\"card border-0 mb-4 position-relative\">\n            <!-- <img :src=\"item.imageUrl\" class=\"card-img-top rounded-0\" alt=\"...\"> -->\n            <div :style=\"{backgroundImage: `url(${item.imageUrl})`}\"\n            style=\"height: 325px; background-size: cover; background-position:center center\">\n            </div>\n            <!-- 商品單向頁面 ${id} -->\n            <!-- 我的最愛 icon -->\n            <router-link to=\"\" >\n              <!-- 判定是否在 favor 裡面 -->\n              <i v-if=\"favorite.includes(item.id)\" @click=\"toggleFavorite(item.id)\" class=\"bi bi-heart-fill position-absolute btn btn-lg\" style=\"right: 3px; top: 3px; color:red;\"></i>\n              <i v-else @click=\"toggleFavorite(item.id)\" class=\"bi bi-suit-heart position-absolute btn btn-lg\" style=\"right: 3px; top: 3px; color:red;\"></i>\n            </router-link>\n            <!-- 商品資料 -->\n            <div class=\"card-body p-0\">\n              <h4 class=\"mb-0 mt-3\">\n                <!-- text-decoration:none; 去除底線 -->\n                <router-link class=\"card-text text-muted\" :to=\"`/product/${item.id}`\" style=\"text-decoration:none;\">\n                  <!-- 限制title size得用p、英文字跟中文 rem不太一樣、滑鼠hover顏色 -->\n                  <p class=\"fs-6 m-0\" style=\"height: 3rem; overflow:hidden;\" onmouseover=\"this.style.color='#B08968';\" onmouseout=\"this.style.color='';\">{{item.title}}</p>\n                </router-link>\n              </h4>\n              <p class=\"card-text text-muted mb-0\" style=\"height: 4.5rem; overflow:hidden;\">{{item.description}}</p>\n              <!-- 原本的價目 -->\n              <!-- <p class=\"text-muted mt-3\">NT$ {{item.price}} / {{item.unit}}</p> -->\n              <!-- <p class=\"text-muted mt-3\">NT$ {{item.price}} / {{item.unit}}</p> -->\n              <button @click.prevent=\"addToCart(item)\" type=\"button\" class=\"btn btn-secondary position-absolute bottom-0 start-0 mb-2\">加入購物車</button>\n              <p class=\"mb-0 text-muted text-end mt-2\"><del>NT$ {{item.origin_price}}</del></p>\n              <p class=\"h4 fw-bold text-end mt-1 fs-5\">NT$ {{item.price}}</p>\n            </div>\n          </div>\n        </div>\n      </div>\n      <!-- 分頁元件 -->\n      <PaginationView class=\"mt-6\" :pages=\"pagination\" @get-data=\"getData\"></PaginationView>\n    </div>\n</template>\n\n<script>\n\nimport emitter from '@/libs/emitter'\nimport PaginationView from '@/components/PaginationView.vue'\nexport default {\n  data() {\n    return {\n      category: 'all', // 商品分類 分流用\n      products: [], // API抓下來儲存商品用 - 分頁ver\n      productsAll: [], // API抓下來儲存商品用 - allver\n      pagination: '', // 分頁用\n      favorite: JSON.parse(localStorage.getItem('favorite')) || [] // favorlist 儲存用 - 抓 localStorage 的資料 (需要轉乘json才能使用 localStorage存的是文字) (需要有預設值 [] 因為一開始是空的話會出錯 ex ? 結構問題)\n    }\n  },\n  components: {\n    PaginationView\n  },\n  methods: {\n    // 抓商品資料 - 分頁 + 分類\n    getData(page = 1, category){\n      let url = `${process.env.VUE_APP_url}/api/${process.env.VUE_APP_path}/products/?page=${page}`\n      if (category) {\n        url = `${process.env.VUE_APP_url}/api/${process.env.VUE_APP_path}/products/?page=${page}&category=${category}`\n      }\n      this.$http.get(url)\n      .then((res) => {\n        // console.log(res)\n        this.products = res.data.products\n        this.pagination = res.data.pagination\n        // console.log(this.products)\n      })\n      .catch((err) => {\n        console.dir(err)\n      })\n    },\n    // 抓商品資料 - All\n    getDataAll(){\n      this.$http.get(`${process.env.VUE_APP_url}/api/${process.env.VUE_APP_path}/products/all`)\n      .then((res) => {\n        this.productsAll = res.data.products\n      })\n      .catch((err) => {\n        console.dir(err)\n      })\n    },\n    // 分流後 跑 商品array 篩選裡面物件的值 > 轉存篩選目標 > 回傳篩選目標\n    // 原本分類用 現在使用 query 分類 所以沒用到了\n    // filterDate(item){\n    //   console.log('filterDate')\n    //   if (this.category === 'all'){\n    //     return item\n    //   } else if (this.category === 'type1'){\n    //     // 篩選另存 > 回傳篩選結果\n    //     const newArray = item.filter(item =>\n    //       item.category === '分類一'\n    //     )\n    //     return newArray\n    //   } else if (this.category === 'type2'){\n    //     // 篩選另存 > 回傳篩選結果\n    //     const newArray = item.filter(item =>\n    //       item.category === '分類二'\n    //     )\n    //     return newArray\n    //   } else if (this.category === 'type3'){\n    //     // 篩選另存 > 回傳篩選結果\n    //     const newArray = item.filter(item =>\n    //       item.category === '分類三'\n    //     )\n    //     return newArray\n    //   }\n    // },\n    // 加入購物車 這裡 用html傳進來的 item抓id、qty先暫時用預設 還沒有做數量功能\n    addToCart(item, qty = 1){\n      const data = {\n        product_id: item.id,\n        qty\n      }\n      this.$http.post(`${process.env.VUE_APP_url}/api/${process.env.VUE_APP_path}/cart`, { data })\n      .then((res) => {\n        console.log('addToCart()', res)\n        emitter.emit('get-cart') // 此處觸發 NAVBAR接收\n      })\n      .catch((err) => {\n        console.dir(err.data.message)\n      })\n    },\n    // 最愛狀態更換 - findIndex 判定 id是否存在 不存在加入 存在刪除\n    toggleFavorite(id){\n      console.log('favor')\n      const favoriteId = this.favorite.findIndex(item => item === id)\n      console.log(favoriteId)\n      if (favoriteId === -1){ //  findIndex 沒有的話會 -1 而 -1 也是 true\n        this.favorite.push(id)\n        console.log(this.favorite)\n      } else { // findIndex 有的話會回傳 目標在array的 index位置\n        this.favorite.splice(favoriteId, 1)\n        console.log(this.favorite, favoriteId)\n      }\n    }\n  },\n  watch: {\n    favorite: { // 因為是 陣列 所以需要 深層監聽\n      handler(){ // 控制器\n        // localStorage.setItem('自訂的欄位名稱', 要帶入的 JSON檔案 )\n        // localStorage 沒辦法存 JSON 所以得先轉成字串\n        localStorage.setItem('favorite', JSON.stringify(this.favorite)) // 資料變動的時候寫入到 localStorage\n      },\n      deep: true // 深層監聽\n    }\n  },\n  mounted() {\n    this.getData()\n    // this.getDataAll()\n  }\n}\n</script>\n","<template>\r\n      <!-- 分頁按鈕 -->\r\n    <nav aria-label=\"Page navigation example\">\r\n      <!-- 至中ver -->\r\n        <ul class=\"pagination justify-content-center\">\r\n      <!-- 靠左ver -->\r\n        <!-- <ul class=\"pagination\"> -->\r\n        <li class=\"page-item\" :class=\"{ disabled : !pages.has_pre }\">\r\n            <a class=\"page-link\" href=\"#\" aria-label=\"Previous\" @click.prevent=\" $emit('get-data', inside_pages.current_page - 1)\">\r\n            <span aria-hidden=\"true\">&laquo;</span>\r\n            </a>\r\n        </li>\r\n        <li class=\"page-item\" v-for=\" page in pages.total_pages \" :key=\" page + 'page'\" :class=\" {active: page === pages.current_page}\">\r\n            <!-- 追加 .prevent 無效 a link 轉址 -->\r\n            <a class=\"page-link\" href=\"\" @click.prevent=\" $emit('get-data', page) \"> {{ page }} </a>\r\n        </li>\r\n        <li class=\"page-item\" :class=\"{ disabled : !pages.has_next }\" >\r\n            <a class=\"page-link\" href=\"#\" aria-label=\"Next\" @click.prevent=\" $emit('get-data', inside_pages.current_page + 1)\" >\r\n            <span aria-hidden=\"true\">&raquo;</span>\r\n            </a>\r\n        </li>\r\n    </ul>\r\n  </nav>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    data(){\r\n      return {\r\n        inside_pages: {}\r\n      }\r\n    },\r\n    props: ['pages'],\r\n    updated() {\r\n      this.inside_pages = this.pages\r\n    }\r\n}\r\n</script>\r\n","import { render } from \"./PaginationView.vue?vue&type=template&id=2c7fdead\"\nimport script from \"./PaginationView.vue?vue&type=script&lang=js\"\nexport * from \"./PaginationView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\admin\\\\Desktop\\\\Coding\\\\Learn-Code\\\\Ming_github_io\\\\Vue\\\\homeWork\\\\week9\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./ProductsView.vue?vue&type=template&id=515e9c95\"\nimport script from \"./ProductsView.vue?vue&type=script&lang=js\"\nexport * from \"./ProductsView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\admin\\\\Desktop\\\\Coding\\\\Learn-Code\\\\Ming_github_io\\\\Vue\\\\homeWork\\\\week9\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_hoisted_4","style","onmouseover","onmouseout","onClick","$options","onclick","href","$data","total_pages","_createElementBlock","_Fragment","_renderList","item","key","id","backgroundImage","imageUrl","_createVNode","_component_router_link","to","includes","_toDisplayString","title","description","type","_hoisted_15","origin_price","price","_component_PaginationView","pages","onGetData","_hoisted_3","_hoisted_6","disabled","$props","has_pre","_ctx","current_page","page","active","_hoisted_5","has_next","data","inside_pages","props","updated","this","__exports__","category","products","productsAll","pagination","favorite","JSON","parse","localStorage","getItem","components","PaginationView","methods","getData","url","$http","get","then","res","catch","err","console","dir","getDataAll","addToCart","qty","product_id","post","log","emitter","message","toggleFavorite","favoriteId","findIndex","push","splice","watch","handler","setItem","stringify","deep","mounted","render"],"sourceRoot":""}