"use strict";(self["webpackChunkweek9"]=self["webpackChunkweek9"]||[]).push([[918],{4918:function(e,t,l){l.r(t),l.d(t,{default:function(){return ye}});var s=l(3396),r=l(7139);const d={key:0,class:"container"},c={class:"row d-flex justify-content-center align-items-center"},i={class:"row d-flex flex-nowrap justify-content-center align-items-center"},n=(0,s.uE)('<div style="max-width:18rem;" class="col-3 d-none d-sm-block card text-white bg-secondary my-5 mx-4 rounded"><div class="d-flex flex-column flex-nowrap justify-content-center align-items-center"><i class="bi bi-check2-circle mt-2" style="font-size:40px;"></i><p class="card-text text-center m-0">Step1</p><p class="card-text text-center mb-2">確認訂單</p></div></div><div style="max-width:18rem;" class="col-3 d-none d-sm-block card text-white bg-secondary my-5 mx-4 rounded"><div class="d-flex flex-column flex-nowrap justify-content-center align-items-center"><i class="bi bi-check2-circle mt-2" style="font-size:40px;"></i><p class="card-text text-center m-0">Step2</p><p class="card-text text-center mb-2">建立訂單</p></div></div>',2),o={key:0,style:{"max-width":"18rem"},class:"col-3 d-none d-sm-block card text-white bg-secondary my-5 mx-4 rounded"},a=(0,s._)("div",{class:"d-flex flex-column flex-nowrap justify-content-center align-items-center"},[(0,s._)("i",{class:"bi bi-check2-circle mt-2",style:{"font-size":"40px"}}),(0,s._)("p",{class:"card-text text-center m-0"},"Step3"),(0,s._)("p",{class:"card-text text-center mb-2"},"付款")],-1),u=[a],p={key:1,style:{"max-width":"18rem"},class:"col-3 d-none d-sm-block card text-balck bg-info my-5 mx-4 rounded"},_=(0,s._)("div",{class:"d-flex flex-column flex-nowrap justify-content-center align-items-center"},[(0,s._)("i",{class:"bi bi-dash-circle-dotted mt-2",style:{"font-size":"40px"}}),(0,s._)("p",{class:"card-text text-center m-0"},"Step3"),(0,s._)("p",{class:"card-text text-center mb-2"},"付款")],-1),x=[_],m={key:2,style:{"max-width":"18rem"},class:"col-10 d-flex align-items-center d-block d-sm-none card text-white bg-secondary my-5 mx-4 rounded"},w=(0,s._)("i",{class:"bi bi-check2-circle mt-2",style:{"font-size":"40px"}},null,-1),y=(0,s._)("p",{class:"card-text text-center m-0"},"Step3",-1),h=(0,s._)("p",{class:"card-text text-center mb-2"},"付款",-1),b=[w,y,h],f={key:3,style:{"max-width":"18rem"},class:"col-10 d-flex align-items-center d-block d-sm-none card text-balck bg-info my-5 mx-4 rounded"},g=(0,s._)("i",{class:"bi bi-dash-circle-dotted mt-2",style:{"font-size":"40px"}},null,-1),v=(0,s._)("p",{class:"card-text text-center m-0"},"Step3",-1),k=(0,s._)("p",{class:"card-text text-center mb-2"},"付款",-1),z=[g,v,k],D={class:"d-flex justify-content-center"},S={class:"col-6 card text-center",style:{}},j=(0,s._)("div",{class:"card-header"},null,-1),O={class:"card-body"},$={key:0},T=(0,s._)("p",{class:"m-0",style:{"font-size":"2rem",color:"green"}},"已付款",-1),C=[T],H={key:1},K=(0,s._)("p",{class:"m-0",style:{"font-size":"2rem",color:"red"}},"尚未付款",-1),Y=[K],q=(0,s._)("div",{class:"card-footer text-muted"},null,-1),E={class:"container mt-5"},I={class:"row row-cols-1 row-cols-md-2 row-cols-lg-2"},U={class:"col mb-9"},W=(0,s._)("h4",null,"訂單資訊",-1),Z={class:"table table-striped"},A=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",null,"品名"),(0,s._)("th",{style:{width:"150px"}},"數量/單位"),(0,s._)("th",null,"單價")])],-1),B={style:{"white-space":"nowrap"}},F=(0,s._)("i",{class:"bi bi-link-45deg p-2"},null,-1),G={class:"text-end"},J={class:"position-relative"},L={class:"position-absolute start-50"},M={class:"d-flex d-flex align-items-center justify-content-center flex-nowrap"},N=(0,s._)("div",{class:"d-flex flex-nowrap fs-2 fw-bolder",style:{"white-space":"nowarp","word-break":"keep-all"}},"總金額: ",-1),P={class:"text-end",style:{color:"red","font-size":"1.5rem"}},Q={class:"col mb-5"},R=(0,s._)("h4",null,"訂單細節",-1),V={class:"table"},X=(0,s._)("th",{style:{width:"100px"}},"下訂時間",-1),ee=(0,s._)("th",{style:{width:"100px"}},"訂單編號",-1),te=(0,s._)("th",null,"付款狀態",-1),le={key:0,class:"text-success"},se={key:1,class:"text-muted"},re=(0,s._)("th",{style:{width:"100px"}},"收件人名稱",-1),de=(0,s._)("th",{style:{width:"100px"}},"收件人信箱",-1),ce=(0,s._)("th",{style:{width:"100px"}},"收件人電話",-1),ie=(0,s._)("th",{style:{width:"100px"}},"收件人地址",-1),ne=(0,s._)("th",{style:{width:"100px"}},"留言",-1),oe=(0,s._)("th",{style:{width:"100px"}},"訂單總金額",-1),ae={style:{color:"red","text-align":"end","font-size":"1.5rem"}},ue={class:""},pe=["disabled"];function _e(e,t,l,a,_,w){const y=(0,s.up)("router-link");return _.ready?((0,s.wg)(),(0,s.iD)("div",d,[(0,s._)("div",c,[(0,s._)("div",i,[n,_.order.is_paid?((0,s.wg)(),(0,s.iD)("div",o,u)):((0,s.wg)(),(0,s.iD)("div",p,x)),_.order.is_paid?((0,s.wg)(),(0,s.iD)("div",m,b)):((0,s.wg)(),(0,s.iD)("div",f,z))]),(0,s._)("div",D,[(0,s._)("div",S,[j,(0,s._)("div",O,[_.order.is_paid?((0,s.wg)(),(0,s.iD)("strong",$,C)):((0,s.wg)(),(0,s.iD)("strong",H,Y))]),q])]),(0,s._)("div",E,[(0,s._)("div",I,[(0,s._)("div",U,[W,(0,s._)("table",Z,[A,(0,s._)("tbody",null,[(0,s._)("td",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(_.order.products,(e=>((0,s.wg)(),(0,s.iD)("div",{key:e.id,style:{width:"250px",overflow:"hidden"}},[(0,s.Wm)(y,{to:`/product/${e.product_id}`},{default:(0,s.w5)((()=>[(0,s._)("td",B,[F,(0,s.Uk)(" "+(0,r.zw)(e.product.title),1)])])),_:2},1032,["to"])])))),128))]),(0,s._)("td",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(_.order.products,(e=>((0,s.wg)(),(0,s.iD)("div",{key:e.id},[(0,s._)("td",null,(0,r.zw)(e.product.price)+" x "+(0,r.zw)(e.qty)+" "+(0,r.zw)(e.product.unit),1)])))),128))]),(0,s._)("td",G,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(_.order.products,(e=>((0,s.wg)(),(0,s.iD)("div",{key:e.id},[(0,s._)("td",null,(0,r.zw)(e.total),1)])))),128))])]),(0,s._)("tfoot",null,[(0,s._)("div",J,[(0,s._)("div",L,[(0,s._)("div",M,[N,(0,s._)("div",P,[(0,s._)("strong",null,(0,r.zw)(_.order.total),1)])])])])])])]),(0,s._)("div",Q,[R,(0,s._)("table",V,[(0,s._)("tbody",null,[(0,s._)("tr",null,[X,(0,s._)("td",null,(0,r.zw)(new Date(1e3*_.order.create_at).toISOString().split("T").toString().slice(0,-5).replace(",","-")),1)]),(0,s._)("tr",null,[ee,(0,s._)("td",null,(0,r.zw)(_.order.id),1)]),(0,s._)("tr",null,[te,(0,s._)("td",null,[_.order.is_paid?((0,s.wg)(),(0,s.iD)("strong",le,"已付款")):((0,s.wg)(),(0,s.iD)("span",se,"尚未付款"))])]),(0,s._)("tr",null,[re,(0,s._)("td",null,(0,r.zw)(_.order.user.name),1)]),(0,s._)("tr",null,[de,(0,s._)("td",null,(0,r.zw)(_.order.user.email),1)]),(0,s._)("tr",null,[ce,(0,s._)("td",null,(0,r.zw)(_.order.user.tel),1)]),(0,s._)("tr",null,[ie,(0,s._)("td",null,(0,r.zw)(_.order.user.address),1)]),(0,s._)("tr",null,[ne,(0,s._)("td",null,(0,r.zw)(_.order.message),1)]),(0,s._)("tr",null,[oe,(0,s._)("td",ae,[(0,s._)("strong",null,(0,r.zw)(_.order.total),1)])])])]),(0,s._)("div",ue,[(0,s._)("button",{type:"button",class:"btn btn-primary col-12",disabled:_.order.is_paid,onClick:t[0]||(t[0]=e=>w.payOrder())},"確認付款",8,pe)])])])])])])):(0,s.kq)("",!0)}var xe={data(){return{ready:!1,order:{create_at:"",is_paid:"",message:"",total:0,user:{}}}},components:{},methods:{getOrders(){const e=this.$route.params.id;this.$http(`https://vue3-course-api.hexschool.io/v2/api/ming123/order/${e}`).then((t=>{console.log("getOrders()",e,t),this.order=t.data.order,this.ready=!0})).catch((e=>{console.log(e),console.dir(e)}))},payOrder(){const e=this.$route.params.id;console.log(e),this.$http.post(`https://vue3-course-api.hexschool.io/v2/api/ming123/pay/${e}`).then((e=>{console.log("pay() ok end"),this.getOrders(),this.scrollToTop()})).catch((e=>{console.log(e),console.dir(e)}))},scrollToTop(){window.scrollTo(0,0)}},mounted(){this.getOrders()}},me=l(89);const we=(0,me.Z)(xe,[["render",_e]]);var ye=we}}]);
//# sourceMappingURL=918.ee9d1eca.js.map