{"version":3,"file":"js/806.62ed9df4.js","mappings":"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","sources":["webpack://week8/./src/views/Front/CartView.vue","webpack://week8/./src/views/Front/CartView.vue?2af0"],"sourcesContent":["<template>\n<div class=\"container\">\n  <!-- 購物車列表 - ALL -->\n  <div class=\"text-end\">\n    <button  @click=\"removeAllCartItem\" :class=\" {'disabled' :cartData.carts.length === 0 }\"\n      class=\"btn btn-outline-danger\" type=\"button\">清空購物車</button>\n  </div>\n\n  <!-- 購物車列表 架構 -->\n  <table class=\"table align-middle\">\n    <thead>\n      <tr>\n        <th></th>\n        <th>圖片</th>\n        <th>品名</th>\n        <th style=\"width: 150px\">數量/單位</th>\n        <th>單價</th>\n      </tr>\n    </thead>\n    <tbody>\n      <!-- 購物車 - 架構 綁 V -->\n      <!-- 折扣卷 購物車有資料時才顯示 -->\n      <template v-if=\"cartData.carts\">\n        <tr v-for=\" item in cartData.carts\" :key=\"item.id\">\n          <td>\n            <!-- 購物車 - x 移除購物車商品按鈕 -->\n            <button @click=\"removeCartItem( item.id )\" :disabled=\"isLoadingItem === item.id\"\n            type=\"button\" class=\"btn btn-outline-danger btn-sm\">\n              x\n            </button>\n          </td>\n          <td>\n            <!-- 購物車 - 商品圖片 -->\n            <div :style=\"{ backgroundImage: `url( ${ item.product.imageUrl })`}\"\n            style=\"height: 100px; background-size: cover; background-position: center\">\n            </div>\n          </td>\n          <td>\n            {{ item.product.title }}\n            <!-- <div class=\"text-success\">已套用優惠券</div> -->\n          </td>\n          <td>\n            <!-- 購物車 - 商品數量 -->\n            <div class=\"input-group input-group-sm\">\n              <div class=\"input-group mb-3\">\n                <!-- <input v-model=\" item.qty \" min=\"1\" type=\"number\" class=\"form-control\"> -->\n                <select id=\"\" class=\"form-select\"\n                v-model=\" item.qty\" @change=\" updataCartItem( item )\" :disabled=\"isLoadingItem === item.id\">\n                  <!-- :selected=\"item.qty === num\" -->\n                  <option :value=\"num\" v-for=\" num in 20\" :key=\"`${num} + ${item.id}`\" > {{ num }} </option>\n                </select>\n                <span class=\"input-group-text\" id=\"basic-addon2\">{{ item.product.unit }}</span>\n              </div>\n            </div>\n          </td>\n          <td class=\"text-end\">\n            {{ item.total }}\n            <!-- <small class=\"text-success\">折扣價：</small> -->\n          </td>\n        </tr>\n      </template>\n    </tbody>\n    <!-- 上面綁 V 結束 -->\n    <!-- 總計 -->\n    <tfoot>\n      <tr>\n        <td></td>\n        <!-- colspan = 要跨行的列數 -->\n        <td colspan=\"3\" class=\"text-end\">總計</td>\n        <td class=\"text-end\">{{ cartData.total }}</td>\n      </tr>\n      <tr>\n        <!-- <td colspan=\"3\" class=\"text-end text-success\">折扣價</td>\n        <td class=\"text-end text-success\">{{  }}</td> -->\n      </tr>\n    </tfoot>\n\n  </table>\n  <!-- 購物車架構 結束 -->\n\n  <!-- 表單驗證 -->\n  <div class=\"my-5 row justify-content-center\">\n    <!-- @submit=\"createOrder\" -->\n    <v-form @submit=\"createOrder\" ref=\"form\" class=\"col-md-6\" v-slot=\"{ errors }\" >\n      <div class=\"mb-3\">\n        <label for=\"email\" class=\"form-label\">Email</label>\n        <v-field v-model=\"form.user.email\" id=\"email\" name=\"email\" type=\"email\" class=\"form-control\"\n                  :class=\"{ 'is-invalid': errors['email'] }\" placeholder=\"請輸入 Email\" rules=\"email\"\n                ></v-field>\n        <error-message name=\"email\" class=\"invalid-feedback\"></error-message>\n      </div>\n\n      <div class=\"mb-3\">\n        <label for=\"name\" class=\"form-label\">收件人姓名</label>\n        <v-field v-model=\"form.user.name\" id=\"name\" name=\"姓名\" type=\"text\" class=\"form-control\" :class=\"{ 'is-invalid': errors['姓名'] }\"\n                  placeholder=\"請輸入姓名\" rules=\"required\"></v-field>\n        <error-message name=\"姓名\" class=\"invalid-feedback\"></error-message>\n      </div>\n\n      <div class=\"mb-3\">\n        <label for=\"tel\" class=\"form-label\">收件人電話</label>\n        <v-field v-model=\"form.user.tel\" id=\"tel\" name=\"電話\" type=\"number\" class=\"form-control\" :class=\"{ 'is-invalid': errors['電話'] }\"\n                  placeholder=\"請輸入電話\" :rules=\"isPhone\" ></v-field>\n        <error-message name=\"電話\" class=\"invalid-feedback\"></error-message>\n      </div>\n\n      <div class=\"mb-3\">\n        <label for=\"address\" class=\"form-label\">收件人地址</label>\n        <v-field v-model=\"form.user.address\" id=\"address\" name=\"地址\" type=\"text\" class=\"form-control\" :class=\"{ 'is-invalid': errors['地址'] }\"\n                  placeholder=\"請輸入地址\" rules=\"required\" ></v-field>\n        <error-message name=\"地址\" class=\"invalid-feedback\"></error-message>\n      </div>\n\n      <div class=\"mb-3\">\n        <label for=\"message\" class=\"form-label\">留言</label>\n        <textarea v-model=\"form.message\" id=\"message\" class=\"form-control\" cols=\"30\" rows=\"10\" ></textarea>\n      </div>\n      <div class=\"text-end\">\n        <button type=\"submit\" class=\"btn btn-danger\" :disabled=\"Object.keys(errors).length > 0 || cartData.carts.length === 0 \"\n                >送出訂單</button>\n      </div>\n    </v-form>\n\n  </div>\n</div>\n</template>\n\n<script>\n\nimport emitter from '@/libs/emitter'\n\nexport default {\n  data() {\n    return {\n      cartData: {\n        // length 無校關係 生命週期原因 所以這裡事先寫好結構\n        carts: []\n      },\n      products: [],\n      productsID: '',\n      isLoadingItem: '',\n      form: {\n          user: {\n          name: '',\n          email: '',\n          tel: '',\n          address: ''\n        },\n        message: ''\n      }\n    }\n  },\n  components: {\n  },\n  methods: {\n    // 以下購物車相關\n    // 抓購物車資料\n    getCart(){\n      this.$http.get(`${process.env.VUE_APP_url}/api/${process.env.VUE_APP_path}/cart`)\n      .then((res) => {\n        this.cartData = res.data.data\n        console.log('getCart()', res)\n      })\n      .catch((err) => {\n        alert(err.data.message)\n      })\n    },\n    // 更改購物車商品數量\n    updataCartItem(item){\n      const data = {\n        product_id: item.id,\n        qty: item.qty\n      }\n      this.isLoadingItem = item.id\n      this.$http.put(`${process.env.VUE_APP_url}/api/${process.env.VUE_APP_path}/cart/${item.id}`, { data })\n      .then((res) => {\n        console.log('updataCartItem()', res)\n        this.getCart()\n        this.isLoadingItem = ''\n        // 這是通知 致行 navbar 的\n        emitter.emit('get-cart', () => {\n          this.getCart()\n        })\n      })\n      .catch((err) => {\n        console.dir(err.data.message)\n        alert(err.data.message)\n      })\n    },\n    // 刪除購物車 單體\n    removeCartItem(id){\n      this.isLoadingItem = id\n      this.$http.delete(`${process.env.VUE_APP_url}/api/${process.env.VUE_APP_path}/cart/${id}`)\n      .then((res) => {\n        console.log('removeCartItem()', res)\n        this.getCart()\n        // 這是通知 致行 navbar 的\n        emitter.emit('get-cart', () => {\n          this.getCart()\n        })\n        this.isLoadingItem = ''\n      })\n      .catch((err) => {\n        alert(err.data.message)\n      })\n    },\n    // 刪除購物車 全部\n    removeAllCartItem(){\n      this.$http.delete(`${process.env.VUE_APP_url}/api/${process.env.VUE_APP_path}/carts`)\n      .then((res) => {\n        console.log('removeAllCartItem()', res)\n        this.getCart()\n        // 這是通知 致行 navbar 的\n        emitter.emit('get-cart', () => {\n          this.getCart()\n        })\n      })\n      .catch((err) => {\n        alert(err.data.message)\n      })\n    },\n    createOrder(){\n      const order = this.form\n      this.$http.post(`${process.env.VUE_APP_url}/api/${process.env.VUE_APP_path}/order`, { data: order })\n      .then((res) => {\n        console.log('createOrder()', res)\n        this.$refs.form.resetForm()\n        this.getCart()\n        this.form.message = ''\n        // 這是通知 致行 navbar 的\n        emitter.emit('get-cart', () => {\n          this.getCart()\n        })\n        this.$router.push(`/pay/${res.data.orderId}`)\n        console.log('已送出訂單')\n      })\n      .catch((err) => {\n        console.log(err.data.message)\n      })\n    },\n    // 購物車相關結束\n    // 以下表單驗證用\n    isPhone(value) {\n      const phoneNumber = /^(09)[0-9]{8}$/\n      return phoneNumber.test(value) ? true : '需要正確的電話號碼' // phoneNumber.test(外面表單輸入的值?) ? true的結果 : false的結果 嗎\n    }\n  },\n  mounted() {\n    this.getCart()\n  }\n}\n</script>\n","import { render } from \"./CartView.vue?vue&type=template&id=9ead1216\"\nimport script from \"./CartView.vue?vue&type=script&lang=js\"\nexport * from \"./CartView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\admin\\\\Desktop\\\\Coding\\\\Learn-Code\\\\Ming_github_io\\\\Vue\\\\homeWork\\\\week8\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","style","id","colspan","for","_createElementBlock","onClick","$options","$data","carts","length","type","_hoisted_4","_Fragment","key","_renderList","item","disabled","_hoisted_5","backgroundImage","product","imageUrl","_toDisplayString","title","qty","$event","onChange","num","value","_hoisted_9","unit","total","_hoisted_12","_hoisted_13","_hoisted_15","_createVNode","_component_v_form","onSubmit","ref","errors","_hoisted_18","_component_v_field","user","email","name","placeholder","rules","_component_error_message","_hoisted_20","_hoisted_22","tel","_hoisted_24","address","_hoisted_26","message","cols","rows","Object","keys","_hoisted_28","data","cartData","products","productsID","isLoadingItem","form","components","methods","getCart","this","$http","get","then","res","console","log","catch","err","alert","updataCartItem","product_id","put","emitter","dir","removeCartItem","delete","removeAllCartItem","createOrder","order","post","$refs","resetForm","$router","push","orderId","isPhone","phoneNumber","test","mounted","__exports__","render"],"sourceRoot":""}