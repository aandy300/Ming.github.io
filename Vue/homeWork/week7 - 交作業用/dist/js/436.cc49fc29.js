"use strict";(self["webpackChunkweek6"]=self["webpackChunkweek6"]||[]).push([[436],{6436:function(s,e,o){o.r(e),o.d(e,{default:function(){return v}});var t=o(3396),n=o(9242);const r={class:"container mt-5"},a={class:"row justify-content-center"},i={class:"col-md-6"},c=(0,t._)("h1",{class:"h3 mb-3 font-weight-normal"},"請先登入",-1),l={class:"mb-2"},u={id:"form",class:"form-signin"},d={class:"form-floating mb-3"},m=(0,t._)("label",{for:"username"},"Email address",-1),h={class:"form-floating"},p=(0,t._)("label",{for:"password"},"Password",-1);function f(s,e,o,f,g,w){return(0,t.wg)(),(0,t.iD)("div",r,[(0,t._)("form",{class:"row justify-content-center",onSubmit:e[3]||(e[3]=(0,n.iM)(((...e)=>s.signIn&&s.signIn(...e)),["prevent"]))},[(0,t._)("div",a,[(0,t._)("div",i,[c,(0,t._)("div",l,[(0,t._)("form",u,[(0,t._)("div",d,[(0,t.wy)((0,t._)("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>g.user.username=s),type:"email",class:"form-control",id:"username",placeholder:"name@example.com",required:"",autofocus:""},null,512),[[n.nr,g.user.username]]),m]),(0,t._)("div",h,[(0,t.wy)((0,t._)("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>g.user.password=s),type:"password",class:"form-control",id:"password",placeholder:"Password",required:""},null,512),[[n.nr,g.user.password]]),p]),(0,t._)("button",{onClick:e[2]||(e[2]=s=>w.siginIn()),class:"btn btn-lg btn-primary w-100 mt-3",type:"button"}," 登入 ")])])])])],32)])}var g={data(){return{user:{username:"",password:""}}},methods:{checkLogin(){const s=document.cookie.replace(/(?:(?:^|.*;\s*)mingToken\s*\=\s*([^;]*).*$)|^.*$/,"$1");this.$http.defaults.headers.common["Authorization"]=s,this.$http.post("https://vue3-course-api.hexschool.io/v2/api/user/check").then((s=>{console.log("checkLogin()","確認登入成功",s),this.$router.push("/admin/products")})).catch((s=>{console.log(s,"沒有登入資訊，請先登入過一次"),this.$router.push("/admin/login")}))},siginIn(){this.$http.post("https://vue3-course-api.hexschool.io/v2/admin/signin",this.user).then((s=>{console.log(s);const{token:e,expired:o}=s.data;document.cookie=`mingToken=${e}; expires=${new Date(o)}`,this.checkLogin(),this.$router.push("/admin/products")})).catch((s=>{console.dir(s),console.log(s),alert(`${s.status}, ${s.data.message}`)}))}},mounted(){console.log("跑登入",this.user.username,this.user.password)}},w=o(89);const k=(0,w.Z)(g,[["render",f]]);var v=k}}]);
//# sourceMappingURL=436.cc49fc29.js.map