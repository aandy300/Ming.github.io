{"version":3,"file":"js/436.cc49fc29.js","mappings":"uLAEaA,MAAM,kB,GAEEA,MAAM,8B,GACFA,MAAM,Y,GACPC,EAAAA,EAAAA,GAAgD,MAA5CD,MAAM,8BAA6B,QAAI,G,GACtCA,MAAM,Q,GAEGE,GAAG,OAAOF,MAAM,e,GACjBA,MAAM,sB,GAGPC,EAAAA,EAAAA,GAA2C,SAApCE,IAAI,YAAW,iBAAa,G,GAElCH,MAAM,iB,GAGPC,EAAAA,EAAAA,GAAsC,SAA/BE,IAAI,YAAW,YAAQ,G,0CAhB1DC,EAAAA,EAAAA,IA2BI,MA3BJ,EA2BI,EA1BAH,EAAAA,EAAAA,GAyBO,QAzBDD,MAAM,6BAA8BK,SAAM,8BAAUC,EAAAA,QAAAA,EAAAA,UAAAA,IAAM,eAAhE,EACIL,EAAAA,EAAAA,GAuBM,MAvBN,EAuBM,EAtBFA,EAAAA,EAAAA,GAqBM,MArBN,EAqBM,CApBFM,GACAN,EAAAA,EAAAA,GAkBM,MAlBN,EAkBM,EAhBEA,EAAAA,EAAAA,GAcO,OAdP,EAcO,EAbPA,EAAAA,EAAAA,GAIM,MAJN,EAIM,WAHFA,EAAAA,EAAAA,GACkD,S,qCADlCO,EAAAA,KAAKC,SAAQC,GAAEC,KAAK,QAAQX,MAAM,eAAeE,GAAG,WACpEU,YAAY,mBAAmBC,SAAA,GAASC,UAAA,IADxC,iBAAgBN,EAAAA,KAAKC,YAErBM,KAEJd,EAAAA,EAAAA,GAIM,MAJN,EAIM,WAHFA,EAAAA,EAAAA,GACgC,S,qCADhBO,EAAAA,KAAKQ,SAAQN,GAAEC,KAAK,WAAWX,MAAM,eAAeE,GAAG,WACvEU,YAAY,WAAWC,SAAA,IADvB,iBAAgBL,EAAAA,KAAKQ,YAErBC,KAEJhB,EAAAA,EAAAA,GAES,UAFIiB,QAAK,eAAGC,EAAAA,WAAYnB,MAAM,oCAAoCW,KAAK,UAAS,iBAjB7G,MA+BZ,OACIS,OACI,MAAO,CACHC,KAAM,CAEF,SAAY,GAEZ,SAAY,MAIxBC,QAAS,CAELC,aAGI,MAAMC,EAAQC,SAASC,OAAOC,QAAQ,mDAAoD,MAE1FC,KAAKC,MAAMC,SAASC,QAAQC,OAAO,iBAAmBR,EAEtDI,KAAKC,MAAMI,KAAK,0DACfC,MAAMC,IACHC,QAAQC,IAAI,eAAgB,SAAUF,GACtCP,KAAKU,QAAQC,KAAK,sBAErBC,OAAOC,IACJL,QAAQC,IAAII,EAAK,kBACjBb,KAAKU,QAAQC,KAAK,oBAG1BG,UACAd,KAAKC,MAAMI,KAAM,uDAA0CL,KAAKP,MAC/Da,MAAMC,IACHC,QAAQC,IAAIF,GACZ,MAAM,MAAEX,EAAF,QAASmB,GAAYR,EAAIf,KAC/BK,SAASC,OAAU,aAAYF,cAAkB,IAAIoB,KAAKD,KAC1Df,KAAKL,aAELK,KAAKU,QAAQC,KAAK,sBAErBC,OAAOC,IACNL,QAAQS,IAAIJ,GACZL,QAAQC,IAAII,GACZK,MAAO,GAAEL,EAAIM,WAAWN,EAAIrB,KAAK4B,gBAIvCC,UAEIb,QAAQC,IAAI,MAAOT,KAAKP,KAAKZ,SAAUmB,KAAKP,KAAKL,Y,QC9EzD,MAAMkC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE","sources":["webpack://week6/./src/views/AdminLogin.vue","webpack://week6/./src/views/AdminLogin.vue?0e42"],"sourcesContent":["// 備註的用掉才能看正常登入 css 樣式 看不懂B5\r\n<template>\r\n        <div class=\"container mt-5\">\r\n            <form class=\"row justify-content-center\" @submit.prevent=\"signIn\">\r\n                <div class=\"row justify-content-center\">\r\n                    <div class=\"col-md-6\">\r\n                        <h1 class=\"h3 mb-3 font-weight-normal\">請先登入</h1>\r\n                        <div class=\"mb-2\">\r\n                            <!-- <div class=\"col-4\"> -->\r\n                                <form id=\"form\" class=\"form-signin\">\r\n                                <div class=\"form-floating mb-3\">\r\n                                    <input v-model=\"user.username\" type=\"email\" class=\"form-control\" id=\"username\"\r\n                                    placeholder=\"name@example.com\" required autofocus>\r\n                                    <label for=\"username\">Email address</label>\r\n                                </div>\r\n                                <div class=\"form-floating\">\r\n                                    <input v-model=\"user.password\" type=\"password\" class=\"form-control\" id=\"password\"\r\n                                    placeholder=\"Password\" required>\r\n                                    <label for=\"password\">Password</label>\r\n                                </div>\r\n                                <button v-on:click=\" siginIn() \" class=\"btn btn-lg btn-primary w-100 mt-3\" type=\"button\">\r\n                                    登入\r\n                                </button>\r\n                                </form>\r\n                            <!-- </div> -->\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </form>\r\n      </div>\r\n</template>\r\n\r\n// 主要登入而已\r\n<script>\r\nexport default {\r\n    data() {\r\n        return {\r\n            user: {\r\n                // eslint-disable-next-line quote-props\r\n                'username': '',\r\n                 // eslint-disable-next-line quote-props\r\n                'password': ''\r\n            }\r\n        }\r\n    },\r\n    methods: {\r\n        // 確認登入並做toeken?\r\n        checkLogin(){\r\n            // token處理\r\n            // eslint-disable-next-line no-useless-escape\r\n            const token = document.cookie.replace(/(?:(?:^|.*;\\s*)mingToken\\s*\\=\\s*([^;]*).*$)|^.*$/, '$1')\r\n            // eslint-disable-next-line dot-notation\r\n            this.$http.defaults.headers.common['Authorization'] = token\r\n            // token處理結束\r\n            this.$http.post('https://vue3-course-api.hexschool.io/v2/api/user/check')\r\n            .then((res) => {\r\n                console.log('checkLogin()', '確認登入成功', res)\r\n                this.$router.push('/admin/products') // $router.push() 取代原先跳轉頁面\r\n            })\r\n            .catch((err) => {\r\n                console.log(err, '沒有登入資訊，請先登入過一次')\r\n                this.$router.push('/admin/login') // $router.push() 取代原先跳轉頁面\r\n            })\r\n        },\r\n        siginIn(){\r\n        this.$http.post(`${process.env.VUE_APP_url}/admin/signin`, this.user)\r\n        .then((res) => {\r\n            console.log(res)\r\n            const { token, expired } = res.data // 抓出 token & 到期時間\r\n            document.cookie = `mingToken=${token}; expires=${new Date(expired)}` // token有效時間\r\n            this.checkLogin()\r\n        //   window.location = 'products.html' // 原本跳轉頁面\r\n            this.$router.push('/admin/products') // $router.push() 取代原先跳轉頁面\r\n        })\r\n        .catch((err) => {\r\n          console.dir(err)\r\n          console.log(err)\r\n          alert(`${err.status}, ${err.data.message}`)\r\n        })\r\n    }\r\n    },\r\n    mounted() {\r\n        // this.checkLogin()\r\n        console.log('跑登入', this.user.username, this.user.password)\r\n    }\r\n}\r\n</script>\r\n","import { render } from \"./AdminLogin.vue?vue&type=template&id=40464438\"\nimport script from \"./AdminLogin.vue?vue&type=script&lang=js\"\nexport * from \"./AdminLogin.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\admin\\\\Desktop\\\\Coding\\\\Learn-Code\\\\Ming_github_io\\\\Vue\\\\homeWork\\\\week7 - 交作業用\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","id","for","_createElementBlock","onSubmit","_ctx","_hoisted_4","$data","username","$event","type","placeholder","required","autofocus","_hoisted_8","password","_hoisted_10","onClick","$options","data","user","methods","checkLogin","token","document","cookie","replace","this","$http","defaults","headers","common","post","then","res","console","log","$router","push","catch","err","siginIn","expired","Date","dir","alert","status","message","mounted","__exports__","render"],"sourceRoot":""}